"use strict";!function(){angular.module("xstApp",["ui.router","ngStorage","hc.marked","btorfs.multiselect","angularMoment","ng-bs3-datepicker"]).run(["amMoment",function(t){t.changeLocale("Zh-cn")}]).config(["markedProvider",function(t){t.setOptions({renderer:new marked.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1,highlight:function(t){return hljs.highlightAuto(t).value}})}]).config(["$locationProvider",function(t){t.html5Mode(!0)}]).config(["$provide",function(t){t.decorator("$log",["$delegate",function(t){var e=t.debug;return t.debug=function(){var t=[].slice.call(arguments);t[0]=[(new Date).toString(),": ",t[0]].join(""),e.apply(null,t)},t}])}]).config(["$logProvider",function(t){t.debugEnabled(!1)}])}(),function(){angular.module("xstApp").factory("timestampToDate",[function(){return function(t){var e=parseInt(t);return 13===e.toString().length?new Date(e):new Date}}]).filter("toEnMonth",[function(){return function(t){switch(parseInt(t)){case 1:return"Jan";case 2:return"Feb";case 3:return"Mar";case 4:return"Apr";case 5:return"May";case 6:return"Jun";case 7:return"Jul";case 8:return"Aug";case 9:return"Sept";case 10:return"Oct";case 11:return"Nov";case 12:return"Dec"}}}]).filter("imgURl",["API",function(t){return function(e){return e&&-1===e.indexOf("http")?""+t.imgResource+e:e?e:!1}}])}(),function(){angular.module("xstApp").filter("toTrusted",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}])}(),function(){angular.module("xstApp").factory("AJAX",["$http","$localStorage","$rootScope",function(t,e,n){return function(o){var r=void 0;r=e.authorization&&e.authorization.token?e.authorization.token:null;var i={authorization:"token "+r,"Content-Type":"application/json; charset=utf-8"},a={method:o.method||"GET",data:o.data,params:o.params,url:o.url,cache:o.cache||!1,timeout:o.timeout||15e3,success:o.success||angular.noop(),error:o.error||angular.noop(),notify:o.notify||angular.noop(),complete:o.complete||angular.noop(),headers:angular.extend(i,o.headers)};return t(a).then(function(t){10==parseInt(t.data.code)?(console.log("访问内容需要token! code:10"),n.relogin()):9==parseInt(t.data.code)&&(alert("您代表用户组没有修改权限! code:9"),o.success&&o.success(t.data)),8==parseInt(t.data.code)?console.log("后台服务错误,请联系后台管理人员! code:8"):o.success&&o.success(t.data)},function(t){o.error&&o.error(t)},function(t){o.notify&&o.notify(t)})["catch"](function(t){o["catch"]&&o["catch"](t)})["finally"](function(t){o.complete&&o.complete(t)})}}])}(),function(){angular.module("xstApp").factory("API",[function(){var t=CONFIG.url,e=CONFIG.MY_INFO_ID,n=CONFIG.MY,o=CONFIG.EMAIL;return{MY_INFO_ID:e,MY:n,EMAIL:o,login:t+"/api/login",getMyInfo:t+"/api/user/"+e,getMyInfoWithOriginal:t+"/api/user/original",postMyInfo:t+"/api/user",changePassword:t+"/api/change_password",imgUpload:t+"/api/imgupload",imgResource:t+"/uploads/",ArticleFrom:"0",ArticleTo:"10",newUpdateArticle:t+"/api/articles/from_to",getArticleById:t+"/api/article/id",getArticleHistoryWithStructure:t+"/api/article_history",getArticleList:t+"/api/articles",getRawArticleById:t+"/api/article/raw/id",postArt:t+"/api/article",deleteArt:t+"/api/article/id",getTagsListWithStructure:t+"/api/tags_with_structure",getArticlesWithTagId:t+"/api/article_tag/id",getTagsList:t+"/api/tags",addTag:t+"/api/tag",editTag:t+"/api/tag",deleteTag:t+"/api/tag/id",getArticlesComments:t+"/api/article/comments/article_id",changeCommentState:t+"/api/changeCommentState",getCommentToArticleList:t+"/api/commentToArticleList",postComment:t+"/api/comment",changeCommentReplyState:t+"/api/changeCommentReplyState",changeAuthState:t+"/api/changeCommentAuthState",delComment:t+"/api/comment/id",newComment:t+"/api/comment"}}])}(),function(){angular.module("xstApp").factory("$autoTextarea",["$http","$localStorage","$rootScope",function(t,e,n){function o(t,e,n){function o(){var o,a,s=0,u=t.style;t._length!==t.value.length&&(t._length=t.value.length,r||i||(s=parseInt(c("paddingTop"))+parseInt(c("paddingBottom"))),o=document.body.scrollTop||document.documentElement.scrollTop,t.style.height=l+"px",t.scrollHeight>l&&(n&&t.scrollHeight>n?(a=n-s,u.overflowY="auto"):(a=t.scrollHeight-s,u.overflowY="hidden"),u.height=a+e+"px",o+=parseInt(u.height)-t.currHeight,document.body.scrollTop=o,document.documentElement.scrollTop=o,t.currHeight=parseInt(u.height)))}e=e||0;var r=!!document.getBoxObjectFor||"mozInnerScreenX"in window,i=!!window.opera&&!!window.opera.toString().indexOf("Opera"),a=function(e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},c=t.currentStyle?function(e){var n=t.currentStyle[e];if("height"===e&&1!==n.search(/px/i)){var o=t.getBoundingClientRect();return o.bottom-o.top-parseFloat(c("paddingTop"))-parseFloat(c("paddingBottom"))+"px"}return n}:function(e){return getComputedStyle(t,null)[e]},l=parseFloat(c("height"));t.style.resize="none",a("propertychange",o),a("input",o),a("focus",o),o()}return o}])}(),function(){angular.module("xstApp").directive("errSrc",[function(){return{restrict:"A",link:function(t,e,n){e.css({opacity:0});var o="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==";e.on("error",function(){n.errSrc&&n.src!=n.errSrc?n.$set("src",n.errSrc):n.$set("src",o),e.css({opacity:1,transition:"opacity ease 300ms"})}),e.on("load",function(){e.css({opacity:1,transition:"opacity ease 300ms"})})}}}])}(),function(){angular.module("xstApp").factory("$toast",["$timeout","$rootScope","$log",function(t,e,n){function o(n){var o=angular.isArray(n)&&n.length>1&&n[1]?n[1]:1300,c=angular.isArray(n)&&n.length>2&&n[2]?n[2]:300;a=!1;var s=i.shift();r='<div class="toaster alert alert-success"><span>'+s+"</span></div>",l.empty().append(r).addClass("visible active"),t(function(){l.removeClass("active"),t(function(){l.removeClass("visible"),a=!0,e.$broadcast("toastComplete")},c)},o)}var r,i=[],a=!0,c='<div id="toaster-container"></div>';angular.element(document.body).append(c);var l=angular.element(document.getElementById("toaster-container"));return e.$on("toastRequest",function(t,e){i.push(e[0]),a&&o(e)}),e.$on("toastComplete",function(){i.length>0&&o()}),{show:function(){if(!arguments[0]||!angular.isString(arguments[0]))return e.$broadcast("toastRequest","操作失败!"),n.error('注意使用方法: $ionicToast.show("string")!'),!1;var t=Array.prototype.slice.call(arguments);n.debug("$ionicToast:"+t),e.$broadcast("toastRequest",t)}}}])}(),function(){angular.module("xstApp").factory("$verification",function(){return{isUsername:function(t){return/^[A-Za-z0-9_\-\u4e00-\u9fa5]+$/.test(t)},isMobile:function(t){return/^((13[0-9])|(14[0-9])|(15[0-9])|(18[0-9])|(17[0-9]))\d{8}$/.test(t)},isEmpty:function(t){return!t},isNum:function(t){var e=/^\d+$/;return e.test(t)},isNickname:function(t){var e=/^[\u4e00-\u9fa5_a-zA-Z0-9-\s]+$/;return e.test(t)},isPassword:function(t){return t?/^[a-zA-Z0-9]{3,20}$/.test(t):!1},isEmail:function(t){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)}}})}(),function(){angular.module("xstApp").controller("articleCtrl",["AJAX","API","$scope","$timeout","$stateParams","marked","$log","$q","$filter","$rootScope","$state","$autoTextarea",function(t,e,n,o,r,i,a,c,l,s,u,m){function d(n){return c(function(o,r){t({method:"post",url:e.postArt,data:n,success:function(t){1===parseInt(t.code)?o(t):r()}})})}function g(n){var o=c.defer();return t({method:"get",url:e.getRawArticleById.replace("id",n),success:function(t){o.resolve(t)},error:function(t){o.reject(t)}}),o.promise}function p(){var t=[],e=!0,o=!1,r=void 0;try{for(var i,a=n.selection[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var c=i.value;t.push(c._id)}}catch(l){o=!0,r=l}finally{try{!e&&a["return"]&&a["return"]()}finally{if(o)throw r}}var s={_id:n.article._id,title:n.article.title,publish_time:new Date(n.date),tags:t,state:n.article.state,content:n.article.content};return s}function f(){m(h,10)}n.selection=[];var h=document.getElementById("textarea");r._id&&g(r._id).then(function(t){1===parseInt(t.code)&&(n.article=t.data,n.selection=n.article.tags,n.article.content_marked=i(n.article.content),n.date=l("date")(n.article.publish_time,"yyyy/MM/dd HH:mm:ss"),o(function(){f()},0,!1))}),n.options=function(){return c(function(n,o){t({method:"get",url:e.getTagsList,success:function(t){1===parseInt(t.code)&&n(t.data)}})})},n.$watch("article.content",function(){n.article&&(n.article.content_marked=i(n.article.content||""),f())});var A=angular.element(document.getElementById("adminBox-content"));n.isPreview=!1,n.previewBtn=function(){A.toggleClass("preview"),n.isPreview=!n.isPreview},n.$on("$destroy",function(){A.removeClass("preview")}),n.isPublishing=!1,n.publishBtn=function(){n.article.state=!0,n.isPublishing=!0,d(p()).then(function(t){history.back(),n.isPublishing=!1},function(){n.isPublishing=!1})},n.isDrafting=!1,n.draftBtn=function(){n.article.state=!1,n.isDrafting=!0,d(p()).then(function(t){n.isDrafting=!1},function(){n.isDrafting=!1})}}])}(),function(){angular.module("xstApp").controller("articleListCtrl",["AJAX","API","$scope","$log",function(t,e,n,o){n.isLoaded=!1,t({method:"get",url:e.getArticleList,success:function(t){1===parseInt(t.code)&&(n.articleLists=t.data,o.debug("文章列表获取成功!"))},error:function(){o.error("文章列表获取失败!")},complete:function(){n.isLoaded=!0}});var r=void 0;n.delArtBtn=function(t){r=t},n.confirmDelArtBtn=function(){t({method:"delete",url:e.deleteArt.replace("id",r._id),success:function(t){1===parseInt(t.code)&&n.articleLists.splice(n.articleLists.indexOf(r),1)}})}}])}(),function(){angular.module("xstApp").controller("commentCtrl",["AJAX","API","$scope","$log","$q",function(t,e,n,o,r){function i(){return n.isLoaded=!1,t({method:"get",url:e.getCommentToArticleList,success:function(t){1===parseInt(t.code)&&(n.commentList=t.data)},complete:function(){n.isLoaded=!0}})}function a(n){var o=r.defer(),i={_id:n};return t({method:"post",url:e.changeCommentReplyState,data:i,success:function(t){1===parseInt(t.code)?o.resolve():o.reject()}}),o.promise}i(),n.comment_info={content:""},n.comment=function(t){n.replyBox=t},n.confirmAddComment=function(r){var c={article_id:r.article_id._id,pre_id:r._id,next_id:[],name:e.MY,email:e.EMAIL,time:new Date,content:n.comment_info.content,isIReplied:!0,state:!0};a(r._id).then(function(){t({method:"post",url:e.postComment,data:c,success:function(t){1===parseInt(t.code)&&(o.debug("回复成功: "+t),i())},error:function(t){o.debug("回复失败: "+t)}})})["finally"](function(){n.comment_info.content=""})};var c=void 0;n.delbtn=function(t){c=t},n.confirmDelCommBtn=function(){t({method:"delete",url:e.delComment.replace("id",c._id),success:function(t){1===parseInt(t.code)&&n.commentList.splice(n.commentList.indexOf(c),1)}})},n.changeAuthState=function(n){var i=r.defer();return t({method:"post",url:e.changeAuthState,data:{_id:n},success:function(t){1===parseInt(t.code)?(o.debug("状态改变成功"),i.resolve()):i.reject()}}),i.promise},n.Condition_1,n.ConditionFilter_1=function(t){if(!n.Condition_1)return!0;switch(parseInt(n.Condition_1)){case 0:return!0;case 1:return t.article_id?t.article_id._id.toString()===t.pre_id.toString():!1;case 2:return t.article_id?t.article_id._id.toString()!==t.pre_id.toString():!0;default:return!0}},n.Condition_2,n.ConditionFilter_2=function(t){if(!n.Condition_2)return!0;switch(parseInt(n.Condition_2)){case 0:return!0;case 1:return!t.isIReplied;case 2:return!!t.isIReplied;default:return!0}},n.Condition_3,n.ConditionFilter_3=function(t){if(!n.Condition_3)return!0;switch(parseInt(n.Condition_3)){case 0:return!0;case 1:return!t.state;case 2:return!!t.state;default:return!0}}}])}(),function(){angular.module("xstApp").controller("myInfoCtrl",["$scope","AJAX","API","$log","$verification","$timeout","$rootScope","$state","$localStorage","$autoTextarea",function(t,e,n,o,r,i,a,c,l,s){function u(){s(p,10)}e({method:"post",url:n.getMyInfoWithOriginal,data:{_id:n.MY_INFO_ID},success:function(e){1===parseInt(e.code)&&(t.myinfo=e.data,i(function(){u()},0,!0))},error:function(t){o.error(t)}});var m=void 0;t.setThis=function(t){m=t},t.save=function(r){m!==r&&e({method:"put",url:n.postMyInfo,data:{_id:t.myinfo._id,full_name:t.myinfo.full_name,position:t.myinfo.position,address:t.myinfo.address,motto:t.myinfo.motto,personal_state:t.myinfo.personal_state,img_url:t.myinfo.img_url},success:function(t){1===parseInt(t.code)?o.debug(t.msg):o.error(t.msg)}})},t.changeAuthorizationInfo=function(){return r.isUsername(t.myinfo.username)?r.isPassword(t.myinfo.password)?r.isPassword(t.myinfo.new_password)?void e({method:"post",url:n.changePassword,data:{_id:t.myinfo._id,username:t.myinfo.username,password:t.myinfo.password,new_password:t.myinfo.new_password},success:function(e){1===parseInt(e.code)?(t.textState="成功!",o.debug(e.msg),i(function(){l.$reset(),a.isLogin=!1,c.go("login")},200,!0)):(t.textState="失败!",o.error(e.msg))}}):(alert("新密码无效"),!1):(alert("旧密码无效"),!1):(alert("用户名无效"),!1)};var d={url:n.imgUpload,maxFilesize:1e3,paramName:"uploadImg",maxThumbnailFilesize:10,parallelUploads:1,autoProcessQueue:!0},g=new Dropzone(document.getElementById("imgUpload"),d);g.on("success",function(e,n){1===parseInt(n.code)&&(t.myinfo.img_url=n.data,m=!1,t.save(!0))});var p=document.getElementById("personalState__textarea");t.$watch("myinfo.personal_state",function(){t.myinfo&&t.myinfo.personal_state&&u()})}])}(),function(){angular.module("xstApp").controller("tagsCtrl",["AJAX","API","$scope","$log","$timeout","$rootScope","$state",function(t,e,n,o,r,i,a){function c(){return t({method:"get",url:e.getTagsList,success:function(t){1===parseInt(t.code)&&(n.tagLists=t.data)},complete:function(){n.isLoaded=!0}})}n.isLoaded=!1,c(),n.addNewTagBtn=function(){n.newTag={name:null,catalogue_name:null}},n.confirmSaveNewTagBtn=function(){var i={name:n.newTag.name,catalogue_name:n.newTag.catalogue_name};n.submitText="正在提交...",t({method:"post",url:e.addTag,data:i,success:function(t){1===parseInt(t.code)?(o.debug(t.msg),c(),n.submitText="新增成功!",angular.element(document.getElementById("addTag")).modal("hide"),r(function(){n.submitText=null},2e3,!0)):(n.submitText="新增失败, 标签名称已存在!",r(function(){n.submitText=null},2e3,!0),o.error(t.msg))}})},n.editTagBtn=function(t){n.editTag={_id:t._id,name:t.name,catalogue_name:t.catalogue_name}},n.confirmEditTagBtn=function(){n.submitText="正在提交...",t({method:"put",url:e.editTag,data:n.editTag,success:function(t){if(1===parseInt(t.code))o.debug(t.msg),c(),n.submitText="修改成功!",angular.element(document.getElementById("editTag")).modal("hide"),r(function(){n.submitText=null},2e3,!0);else{switch(parseInt(t.code)){case 2:n.submitText="修改失败, 此标签不存在!";break;case 3:n.submitText="修改失败, 标签名称重复!";break;default:n.submitText="修改失败!"}r(function(){n.submitText=null},2e3,!0),o.error(t.msg)}}})},n.delTagBtn=function(t){n.delTag={_id:t}},n.confirmDelTagBtn=function(){n.submitText="正在删除...",t({method:"delete",url:e.deleteTag.replace("id",n.delTag._id),success:function(t){1===parseInt(t.code)?(o.debug(t.msg),c(),n.submitText="删除成功!",angular.element(document.getElementById("delTag")).modal("hide"),r(function(){n.submitText=null},2e3,!0)):(n.submitText="删除失败!",r(function(){n.submitText=null},2e3,!0),o.error(t.msg))}})}}])}(),function(){angular.module("xstApp").controller("blogPageController",["$scope","$http","API",function(t,e,n){e.get(n.getMyInfo).success(function(e){1===parseInt(e.code)&&(t.myInfo=e.data)}).error(function(t,e){}),$('[data-toggle="popover"]').popover()}])}(),function(){angular.module("xstApp")}(),function(){angular.module("xstApp").directive("indexWordFadeIn",function(){return{restirect:"E",replace:!0,link:function(t,e){var n=$("#headlines");setInterval(function(){0==n.find("h1.current").next().length?n.find("h1").first().addClass("current").siblings().removeClass("current"):n.find("h1.current").next().addClass("current").siblings().removeClass("current")},4e3)}}})}(),function(){angular.module("xstApp").controller("loginController",["$scope","AJAX","API","$localStorage","$rootScope","$state",function(t,e,n,o,r,i){angular.element(document.getElementById("username")).focus(),t.data={username:"",password:""},t.loginBtn=function(){return t.data.username?t.data.password?void e({method:"post",url:n.login,data:t.data,success:function(e){if(1===parseInt(e.code))o.authorization={token:e.token,time:(new Date).getTime()},-1!==t.data.username.indexOf("visitor")?o.commentAuth={commentUsername:"Visitor",commentEmail:"visitor@email.com"}:o.commentAuth={commentUsername:n.MY,commentEmail:n.EMAIL},r.tooltip(),r.isLogin=!0,i.go("home");else switch(parseInt(e.code)){case 2:t.errText="用户名或密码错误,请再检查!";break;default:t.errText="系统错误!"}},error:function(){t.errText="系统错误!"}}):void(t.errText="请输入密码!"):void(t.errText="请输入用户名!")},t.keydown=function(e){var n=e||window.$event||arguments.callee.caller.arguments[0];n&&13==n.keyCode&&t.loginBtn()}}])}(),function(){angular.module("xstApp").controller("DetailController",["$scope","$stateParams","AJAX","API","$localStorage","$timeout","$verification","$interval",function(t,e,n,o,r,i,a,c){function l(e,n){e?t.chain.main_state=n:t.chain.sub_state=n}function s(){return r.commentAuth?t.commentUsername&&t.commentEmail?!0:(t.commentInfo.username=r.commentAuth.commentUsername,t.commentInfo.email=r.commentAuth.commentEmail,!0):!1}function u(e){return n({method:"get",url:o.getArticlesComments.replace("article_id",e),success:function(e){1===parseInt(e.code)&&(t.commentList=e.data)}})}console.log(r),t.chain={selectId:"selectId",main_state:"default",sub_state:"default"},t.commentInfo={username:"",email:""},t.canComment=!1,n({method:"get",url:o.getArticleById.replace("id",e.id),success:function(e){1===parseInt(e.code)&&(t.article=e.data,u(t.article._id))},error:function(t){}});var m=void 0;t.commentBtn=function(e,s){if(l(!e.article_id,"going"),m&&(new Date).getTime()-m<3e4){var d=!1;return c(function(){d?(d=!1,l(!e.article_id,"clock")):(d=!0,l(!e.article_id,"error"))},500,6,!0),i(function(){l(!e.article_id,"default")},3e3,!0),!1}if(m=(new Date).getTime(),!(t.commentInfo.username&&t.commentInfo.email&&a.isEmail(t.commentInfo.email))){var d=!1;return c(function(){d?(d=!1,l(!e.article_id,"email")):(d=!0,l(!e.article_id,"error"))},500,6,!0),i(function(){l(!e.article_id,"default")},3e3,!0),!1}t.canComment=!0,r.commentAuth={commentUsername:t.commentInfo.username,commentEmail:t.commentInfo.email};var g=void 0;g=e.article_id?e.article_id:e._id;var p={article_id:g,pre_id:e._id,next_id:[],name:t.commentInfo.username,email:t.commentInfo.email,time:new Date,content:s,state:!1,isIReplied:!1};n({method:"post",url:o.newComment,data:p,success:function(n){1===parseInt(n.code)?(l(!e.article_id,"success"),t.article.comment_num++,u(g),e.article_id&&i(function(){t.chain.selectId=""},1e3,!0)):l(!e.article_id,"error")},error:function(t){l(!e.article_id,"error")},complete:function(){i(function(){l(!e.article_id,"default")},1e3,!0)}})},t.commentToComemntBtn=function(t){var e=$(t.currentTarget).parents(".comments__ask").next(".comments__reply");$(".comments__reply").not(e).removeClass("active"),e.toggleClass("active")},t.canComment=s()}])}(),function(){angular.module("xstApp").controller("ArticleListController",["$scope","$http","API",function(t,e,n){t.isLoaded=!1;var o=n.newUpdateArticle.replace("from",n.ArticleFrom).replace("to",n.ArticleTo);e.get(o).success(function(e){1===parseInt(e.code)&&(t.articleLists=e.data)}).error(function(t,e){})["finally"](function(){t.isLoaded=!0})}])}(),function(){angular.module("xstApp").controller("HistoryListController",["$scope","$http","API",function(t,e,n){t.isLoaded=!1,e.get(n.getArticleHistoryWithStructure).success(function(e){1===parseInt(e.code)&&(t.historyLists=e.data)}).error(function(t,e){})["finally"](function(){t.isLoaded=!0})}])}(),function(){angular.module("xstApp").controller("TagListController",["$scope","$http","API",function(t,e,n){t.isLoaded=!1,e.get(n.getTagsListWithStructure).success(function(e){1===parseInt(e.code)&&(t.tagLists=e.data)}).error(function(t,e){})["finally"](function(){t.isLoaded=!0})}]).controller("findArticlesByTagController",["$scope","$stateParams","$http","API",function(t,e,n,o){var r=o.getArticlesWithTagId.replace("id",e.id);t.isLoaded=!1,n.get(r).success(function(e){1===parseInt(e.code)&&(t.articleLists=e.data)}).error(function(t,e){})["finally"](function(){t.isLoaded=!0})}])}(),function(){angular.module("xstApp").controller("indexController",["$scope","$rootScope","$localStorage","$state","$log","$timeout","$window","$location",function(t,e,n,o,r,i,a,c){function l(){return i(function(){var t=parseInt(document.documentElement.clientWidth);return 768>t?void 0:991>t&&t>768?($('[data-toggle="tooltip"]').tooltip({trigger:"hover",placement:"bottom"}),!0):($('[data-toggle="tooltip"]').tooltip({trigger:"hover",placement:"right"}),!0)},300,!0)}if(e.isLogin=!1,n.authorization){var s=parseInt(n.authorization.time);(new Date).getTime()-s<72e5&&(e.isLogin=!0)}e.$on("$locationChangeStart",function(t,n){n.toString().indexOf("admin")>0&&!e.isLogin&&e.relogin()}),e.relogin=function(){i(function(){c.url("/login"),n.$reset(),e.isLogin=!1,e.tooltip(),console.log("----您还未登陆,请登录!----")},200,!0)},t.logout=function(){angular.element(document.getElementById("logout")).modal()},e.confirmLogout=function(){i(function(){n.$reset(),e.isLogin=!1,c.url("/home"),e.tooltip()},200,!0)},e.tooltip=l,l()}])}(),function(){angular.module("xstApp").config(["$stateProvider","$urlRouterProvider",function(t,e){e.when("/admin/articleManager","/admin/articleManager/articleList"),t.state("admin",{url:"/admin",templateUrl:"web/tpl/admin.html"}).state("admin.myInfo",{url:"/myInfo",controller:"myInfoCtrl",templateUrl:"web/tpl/admin.myinfo.tpl.html"}).state("admin.tags",{url:"/tags",templateUrl:"web/tpl/admin.tags.tpl.html",controller:"tagsCtrl"}).state("admin.articleManager",{url:"/articleManager",templateUrl:"web/tpl/admin.articleManager.tpl.html"}).state("admin.articleManager.articleList",{url:"/articleList",templateUrl:"web/tpl/admin.articleList.tpl.html",controller:"articleListCtrl"}).state("admin.articleManager.article",{params:{_id:null},url:"/article/:_id",templateUrl:"web/tpl/admin.article.tpl.html",controller:"articleCtrl"}).state("admin.comment",{cache:!0,url:"/comments",templateUrl:"web/tpl/admin.comment.tpl.html",controller:"commentCtrl"})}])}(),function(){angular.module("xstApp").config(["$stateProvider","$urlRouterProvider",function(t,e){e.when("/blog","/blog/articleList").otherwise("/"),t.state("home",{url:"/",templateUrl:"web/tpl/home.index.html"}).state("login",{url:"/login",templateUrl:"web/tpl/home.login.html",controller:"loginController"}).state("blog",{controller:"blogPageController",url:"/blog",templateUrl:"web/tpl/home.blogPage.html"}).state("blog.articleList",{controller:"ArticleListController",url:"/articleList",templateUrl:"web/tpl/home.blogPage.articleList.html"}).state("blog.historyList",{controller:"HistoryListController",url:"/historyList",templateUrl:"web/tpl/home.blogPage.historyList.html"}).state("blog.tagList",{controller:"TagListController",url:"/tagList",templateUrl:"web/tpl/home.blogPage.tagList.html"}).state("blog.findArticlesByTag",{params:{id:""},controller:"findArticlesByTagController",url:"/articleList/tag/:id",templateUrl:"web/tpl/home.blogPage.articleList.html"}).state("blog.detail",{params:{id:""},url:"/article/:id",controller:"DetailController",templateUrl:"web/tpl/home.blogPage.article.html"}).state("blog.picture",{controller:"pictureController",url:"/picture",templateUrl:"web/tpl/home.picture.html"})}])}();