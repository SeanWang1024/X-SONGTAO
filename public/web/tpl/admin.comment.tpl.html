<div class="comments animated fadeIn">
    <!--column title-->
    <h3 class="title">
        <i class="fa fa-fw fa-lg fa-comments"></i> 评论管理 / <span class="blue">COMMENTS</span>
    </h3>
    <!--增加-->
    <section class="commentList" ng-init="">

        <!--筛选-->
        <section class="commentList--dropdown">
            <div class="commentList--dropdown-e">
                <label class="commentList--dropdown-label">子主评论筛选: </label>
                <div class="dropdown commentList--dropdown-div">
                    <button ng-init="btn_filter_name_1='全部';Condition_1=0;" class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
                        {{btn_filter_name_1}}
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li ng-click="Condition_1=0;btn_filter_name_1='全部'"><a>全部</a></li>
                        <li ng-click="Condition_1=1;btn_filter_name_1='主评论'"><a>主评论</a></li>
                        <li ng-click="Condition_1=2;btn_filter_name_1='子评论'"><a>子评论</a></li>
                    </ul>
                </div>
            </div>
            <div class="commentList--dropdown-e">
                <label class="commentList--dropdown-label">回复筛选: </label>
                <div class="dropdown commentList--dropdown-div">
                    <button ng-init="btn_filter_name_2='全部';Condition_2=0;" class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
                        {{btn_filter_name_2}}
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li ng-click="Condition_2=0;btn_filter_name_2='全部'"><a>全部</a></li>
                        <li ng-click="Condition_2=1;btn_filter_name_2='未回复'"><a>未回复</a></li>
                        <li ng-click="Condition_2=2;btn_filter_name_2='已回复'"><a>已回复</a></li>
                    </ul>
                </div>
            </div>
            <div class="commentList--dropdown-e">
                <label class="commentList--dropdown-label">审核筛选: </label>
                <div class="dropdown commentList--dropdown-div">
                    <button ng-init="btn_filter_name_3='全部';Condition_3=0;" class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
                        {{btn_filter_name_3}}
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li ng-click="Condition_3=0;btn_filter_name_3='全部'"><a>全部</a></li>
                        <li ng-click="Condition_3=1;btn_filter_name_3='未审核'"><a>未审核</a></li>
                        <li ng-click="Condition_3=2;btn_filter_name_3='已审核'"><a>已审核</a></li>
                    </ul>
                </div>
            </div>
            <button class="btn btn-info" ng-click="Condition_1=0;Condition_2=0;Condition_3=0;btn_filter_name_1=btn_filter_name_2=btn_filter_name_3='全部'">
                <i class="fa fa-refresh"></i>
            </button>
        </section>


        <!--评论-->
        <div class="comments__ask animated fadeIn"
             ng-repeat="item in (commentArr = (commentList  | filter:ConditionFilter_1 | filter:ConditionFilter_2 | filter:ConditionFilter_3 | orderBy:'time':true)) track by $index">
            <div class="comments__ask__title">
                <h3 ui-sref="blog.detail({id:item.article_id._id})"><span>原文: </span><span ng-bind="item.article_id.title"></span></h3>
                <div class="comments__ask__title--btns">
                    <button ng-click="changeAuthState(item._id);item.state=!item.state;" class="btn btn-default btn-sm" ng-class="{true:'btn-success',false:'btn-warning'}[!item.state]">
                        <i class="fa" ng-class="{true:'fa-circle-o',false:'fa-ban'}[!item.state]"></i>
                    </button>
                    <button ng-if="!item.isIReplied" class="btn btn-default btn-sm" ng-click="comment(item)" data-toggle="modal" data-target="#addComm">
                        <i class="fa fa-pencil"></i>
                    </button>
                    <button class="btn btn-default btn-sm btn-danger" ng-click="delbtn(item)" data-toggle="modal" data-target="#delComm">
                        <i class="fa fa-bitbucket"></i>
                    </button>
                </div>
            </div>
            <div class="comments__ask__header">
                <span class="name" ng-bind="item.name"></span>
                &ensp;·&ensp;
                <span am-time-ago="item.time"></span>
                &ensp;·&ensp;
                <span>
                     <a href="mailto:{{item.email}}">{{item.email}}</a>
                </span>
                &ensp;·&ensp;
                <span ng-if="item.article_id._id.toString() === item.pre_id.toString()" class="alreadyReplied">主评论</span>
                <span ng-if="item.article_id._id.toString() !== item.pre_id.toString()" class="alreadyReplied">子评论</span>
                <span ng-if="!item.isIReplied">&ensp;·&ensp; <span class="reply">未回复</span></span>
                <span ng-if="!!item.isIReplied">&ensp;·&ensp; <span class="alreadyReplied">已回复</span></span>

                &ensp;·&ensp;
                <span ng-if="!item.state" class="no-check">审核未通过</span>
                <span ng-if="!!item.state" class="checked">审核通过</span>
            </div>
            <div class="comments__ask__content">
                <span ng-bind="item.content"></span>
            </div>
        </div>

        <!--无数据提示-->
        <div class="nodata  animated fadeIn" ng-if="!commentArr.length && isLoaded">
            <div class="logo-left-box">
                <h2 class="logo"><span class="blue">X</span><span class="white">-SONGTAO</span></h2>
                <h3 class="blue notice">提示!</h3>
                <p class="white">没有找到数据,~~~~(>_<)~~~~</p>
            </div>
            <img src="./web/img/employee.svg" alt="employee">
        </div>

        <!--加载提示-->
        <div class="nodata  animated fadeIn" ng-if="!isLoaded">
            <div class="logo-left-box">
                <h2 class="logo"><span class="blue">X</span><span class="white">-SONGTAO</span></h2>
                <h3 class="blue notice">提示!</h3>
                <p class="white">正在加载,O(∩_∩)O稍等~</p>
            </div>
            <img src="./web/img/employee.svg" alt="employee">
        </div>

    </section>


</div>

<!--弹出层-删除-->
<div class="modal fade" id="delComm" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                <h4 class="modal-title"><i class="fa fa-bitbucket"></i> 删除评论/DELCOMMENT</h4>
            </div>
            <div class="modal-body">
                <h3 class="text-center deleteConfirmText">确认删除此评论?</h3>
            </div>
            <div class="modal-footer">
                <span class="submitText" ng-bind="submitText"></span>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button ng-disabled="!!submitText" type="button" data-dismiss="modal" ng-click="confirmDelCommBtn()" class="btn btn-danger">
                    删除
                </button>
            </div>
        </div>
    </div>
</div>

<!--弹出层-撰写评论-->
<div class="modal fade comment--replyBox" id="addComm" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                <h4 class="modal-title"><i class="fa fa-comments"></i> 进行评论/ADDCOMMENT</h4>
            </div>
            <div class="modal-body comment--replyBox-body">
                <div class="comment--replyBox--textarea">
                    <label for="comment--replyBox--textarea">回复 <span ng-bind="replyBox.name"></span>: </label>
                    <textarea ng-model="comment_info.content" rows="6" id="comment--replyBox--textarea" class="form-control" placeholder="请输入评论内容..."></textarea>
                </div>

                <!--<h3 class="text-center deleteConfirmText">确认删除此评论?</h3>-->
            </div>
            <div class="modal-footer">
                <span class="submitText" ng-bind="submitText"></span>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button ng-disabled="!!submitText" type="button" data-dismiss="modal" ng-click="confirmAddComment(replyBox)" class="btn btn-success">
                    评论
                </button>
            </div>
        </div>
    </div>
</div>